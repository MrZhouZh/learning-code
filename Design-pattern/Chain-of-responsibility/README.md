---
title: 行为模式 - 职责链
---

## 定义

使多个对象都有机会处理请求, 从而避免请求的发送者和接收者之间的耦合关系, 将这些对象连成一条链, 并沿着这条链传递该请求, 直到有个对象处理它为止

```
请求 -> A -> B -> C -> D
```

## 优缺点

### 优点:

1. 灵活拆分重组节点, 耦合性低
2. 处理函数各不影响, 相互隔离
3. 可手动指定起始节点

### 缺点:

1. 不能保证某个请求都会被链中的节点处理, 需要增加一个兜底的节点处理
2. 从性能方面考虑, 需要避免过长的职责链带来的性能损耗

## 实际应用场景

假设负责一个售卖手机的电商网站, 经过分别交纳 500 元定金和 200 元定金的两轮预定后(订单已在此时生成), 现在处于正式购买阶段. 公司针对支付过定金的用户有一定的优惠政策. 正式购买之后, 
 
- 已经支付过 500 元定金的用户会收到 100 元商城优惠券,
- 200 元定金的用户会收到 50 元商城优惠券
- 没支付定金的则进入普通购买模式, 没有优惠券, 而且在库存有限的情况下不一定保证能买到

## 代码示例

- [实现示例](./chain-of-responsibility.js)

- [AOP实现](./chain-of-responsibility-aop.js)

- [Upload示例](./chain-of-responsibility-upload.js)
